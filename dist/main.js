!function(){"use strict";!function(){var e=class{constructor(e,t,r,c,i){this.id=e,this.name=t,this.image=r,this.price=c,this.URL=i}generatePlaceholderPrice(e){let t=e+e*(Math.random()*(2*Math.round(Math.random())-1))*.2;return t=e<10?Math.ceil(t+1):e<100?10*Math.ceil(t/10):e<1e3?50*Math.ceil(t/50):100*Math.ceil(t/100),Math.abs(e-t)>1.01?t:this.generatePlaceholderPrice(e)}assignPlaceholderPrice(){this.placeholderPrice=this.generatePlaceholderPrice(this.price)}guessHigher(){return this.price>this.placeholderPrice}guessLower(){return this.price<this.placeholderPrice}},t=[6514052,6514055,6553101,6491295,6537363,6450247,6482022,6501902,6537422,6537371,6558847,6507324,6531621,6471969,6191309,6421866,6513002,6513e3,6410013,6512370,6530134,6420141,6420142,6529899,6325628,6419631,6447499,6323156,6427952,6492267,6467055,6397576,6397590,6546221,6546219,6443500,6360748,6468484,6447149,6511565,6488940,6555625,6447922,4943603,6447914,6418524,6447911,4299700,6519870,6411917,6356535,6454256,6472669,6471418,6427076,6488911,6426700,6213287,6514475,6511782,6567807,6441423,6550180,6461328,6454736,6544304,6454733,6377587,6564054,6427739,6344419,6505155,6187502,6361926,6535019,5255027,6411140,6464936,6762924,6519391,6530352,6550445,6540329,6514441,6551564,6473099,6551163,6545966,6550535,6522416,6323759,6546137,6548200,6364719,5852906,6494388,6213101,6473808];const r=document.querySelector("#start"),c=document.querySelector("#product-display"),i=document.querySelector("#placeholder-price"),o=document.querySelector("#higher"),s=document.querySelector("#lower"),n=document.querySelector("#current-score"),l=document.querySelector("#high-score"),d=document.querySelector("#feedback"),a=document.querySelector("#next"),u=document.querySelector("#product-link"),h=document.querySelector("#modal-open"),p=document.querySelector("#modal-close"),y=document.querySelector("#modal-container");let m=localStorage.getItem("highScore")||0;const g=[],L=["Correct!","Well done!","Nice one!"],S=["Close one!","Sorry!","Almost!"];class b{constructor(e){this.product=e,this.score=0}static generateURL(){let e=b.selectProduct();for(;g.indexOf(e)>-1;)e=b.selectProduct();return`https://api.bestbuy.com/v1/products(sku=${e})?apiKey=FTJXEwF95489m9I5HzWazZ0l&sort=name.asc&show=name,image,salePrice,url,sku&format=json`}static selectProduct(){return t[Math.floor(Math.random()*t.length)]}displayProduct(){r.style.display="none",d.innerHTML="",u.style.visibility="hidden";let e=document.createElement("h3");e.setAttribute("id","product-name"),e.innerHTML=this.product.name;let t=document.createElement("img");for(t.setAttribute("id","product-image"),t.src=this.product.image,i.innerHTML=`$${this.product.placeholderPrice}.00`;c.firstChild;)c.removeChild(c.firstChild);c.append(e),c.append(t)}async fetchProduct(t){t.preventDefault();try{let t=await fetch(b.generateURL());if(t.ok){let r=await t.json(),c=r.products[0].sku,i=r.products[0].name,o=r.products[0].image,s=r.products[0].salePrice,n=r.products[0].url;this.product=new e(c,i,o,s,n),this.product.assignPlaceholderPrice(),this.displayProduct()}}catch(e){}}guessHigher(){this.product.price>this.product.placeholderPrice?this.correct():this.incorrect()}guessLower(){this.product.price<this.product.placeholderPrice?this.correct():this.incorrect()}correct(){this.score++,this.updateHighScore(),g.push(this.product.id),n.innerHTML=`Score: ${this.score}`,d.innerHTML=`${L[Math.floor(Math.random()*L.length)]} The actual retail price is $${this.product.price.toFixed(2)}`,u.href=`${this.product.URL}`,u.style.visibility=""}incorrect(){this.score=0,g.splice(0,g.length),n.innerHTML=`Score: ${this.score}`,d.innerHTML=`${S[Math.floor(Math.random()*S.length)]} The actual retail price is $${this.product.price.toFixed(2)}`,u.href=`${this.product.URL}`,u.style.visibility=""}updateHighScore(){this.score>parseInt(m)&&(localStorage.setItem("highScore",this.score),m=localStorage.getItem("highScore")),l.innerHTML=`High Score: ${m}`}changeButtons(){"none"===a.style.display?(a.style.display="block",o.style.display="none",s.style.display="none"):(a.style.display="none",o.style.display="block",s.style.display="block")}}let f=new b;document.addEventListener("DOMContentLoaded",f.updateHighScore.bind(f)),r.addEventListener("click",f.fetchProduct.bind(f)),r.addEventListener("click",(function(){document.querySelector(".game").style.borderColor="orange",document.querySelector(".product").style.borderColor="orange",document.querySelector(".main-content").style.visibility="visible",o.style.display="block",s.style.display="block",r.style.display="hidden",y.style.display="none"})),document.addEventListener("DOMContentLoaded",(function(){y.style.display="flex"})),h.addEventListener("click",(function(){y.style.display="flex"})),p.addEventListener("click",(function(){y.style.display="none"})),o.addEventListener("click",f.guessHigher.bind(f)),o.addEventListener("click",f.changeButtons.bind(f)),s.addEventListener("click",f.guessLower.bind(f)),s.addEventListener("click",f.changeButtons.bind(f)),a.addEventListener("click",f.fetchProduct.bind(f)),a.addEventListener("click",f.changeButtons.bind(f))}()}();
//# sourceMappingURL=main.js.map